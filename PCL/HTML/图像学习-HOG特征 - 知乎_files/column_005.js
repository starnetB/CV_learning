(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1257:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var a=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,r=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.decodeValue,o=void 0!==r&&r,c={};t=a.exec(e);){var s=t[1],l=t[3]||t[4];c[s]=(o?i(l):l)||""}return c};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}function o(){return Math.max(window.innerHeight/10,100)}var c=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some((function(e){return"scroll"===e||"auto"===e})))return t;t=t.parentNode||t.parentElement}return window};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=c(e),r=e.getBoundingClientRect().top+(a.pageYOffset||a.scrollTop||0)-(n?o():0)-t;a.scrollTo({top:r,behavior:"smooth"})}},1258:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))}},1273:function(e,t,n){"use strict";var a=n(22),r=n.n(a),i=n(34),o=n.n(i),c=n(36),s=n.n(c),l=n(1),u=n.n(l),d=n(6),h=n.n(d),f=n(16),p=n(52),m=n.n(p),v=n(13),g=n(98),b=n(56),k=n(19),O=n(413),y=n(1313),C=n(87),A=n(1258),j=n(455),w=n(306),x=n(1301),L=n(3),N=["id","newLinkCard"];function M(e){var t=Object(l.useRef)(null),n=e.component,a=void 0===n?"a":n,r=e.className,i=e.onClick,o=e.onMouseDown,c=e.zvideo,s=e.enableInlinePlay,d=void 0!==s&&s,p=e.onImageClick,v=void 0===p?m.a:p,A=e.onInfoClick,x=void 0===A?m.a:A,N=e.renderInjection,M=e.zaProps,T=c.id,R=c.title,E=c.url,I=c.imageUrl,S=c.video,B=S.videoId,D=S.duration,P=S.status,U=c.author,F=c.playCount,V=c.creationReferences,q=!E?"inlinezvideo":"zvideo";Object(l.useEffect)((function(){N||Object(g.onViewedOnce)(t.current,(function(){f.a.trackCardShow(t.current,{id:7844},{button:{text:q}})}))}),[q,N]);var _=Object(l.useCallback)((function(e){f.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:q}}),v(e,c)}),[v,c,q]),Z=Object(l.useCallback)((function(e){f.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:q}}),x(e,c)}),[x,c,q]);if(N){if("function"!=typeof N)throw new Error("renderInjection must be function");return N(e)}return"converting_failure"===P?Object(L.e)(z,{error:"视频转码失败，请重新上传视频"}):Object(L.e)(u.a.Fragment,null,Object(L.e)(k.c,{as:a,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:"ZTextZVideoLinkCard",zaType:"Button",extra:{link:{url:E}},className:h()("ZVideoLinkCard",r),ref:t,href:E,target:"_blank",rel:"noopener noreferrer",onClick:i,onMouseDown:o,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:T,video_id:B}}})},d?Object(L.e)(j.a,{placeholder:Object(L.e)("div",{className:"ZVideoLinkCard-playerContainer"})},Object(L.e)("div",{className:"ZVideoLinkCard-playerContainer"},Object(L.e)(O.a,{type:"video",className:"ZVideoLinkCard-player",src:"https://www.zhihu.com/video/".concat(B),iframeProps:{allowFullScreen:!0},zaProps:Object.assign({token:T},M)}))):Object(L.e)("div",{className:"ZVideoLinkCard-image",style:{backgroundImage:"url(".concat(I,")")},onClick:_},Object(L.e)(w.a,{className:"ZVideoLinkCard-playIcon"}),Boolean(D)&&Object(L.e)("div",{className:"ZVideoLinkCard-duration"},Object(y.a)(D))),Object(L.e)("div",{className:"ZVideoLinkCard-info",onClick:Z},Object(L.e)("div",{className:"ZVideoLinkCard-title"},R),Boolean(E)&&Object(L.e)("div",{className:"ZVideoLinkCard-author"},Object(L.e)(C.a,{className:"ZVideoLinkCard-avatar",url:U.avatarUrl,alt:"",size:20,round:!0}),Object(L.e)("div",null,U.name),null!=V&&V.plaintext?Object(L.e)("div",null," ",V.plaintext):Object(L.e)("div",null,"的视频"),Boolean(F)&&Object(L.e)("div",null," · ",Object(b.cnNiceNumber)(F),"播放")))))}function z(e){var t=e.error;return Object(L.e)("div",{className:"ZVideoLinkErrorCard"},Object(L.e)("div",{className:"ZVideoLinkErrorCard-message"},t.message||"视频加载错误"))}function T(e){var t=e.id,n=e.newLinkCard,a=o()(e,N),i=Object(l.useState)(null),c=r()(i,2),u=c[0],d=c[1],h=Object(l.useState)(null),f=r()(h,2),p=f[0],m=f[1];return Object(l.useEffect)((function(){if(!n){var e="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card");Object(A.a)(e).then((function(e){return Object(v.camelizeKeys)(e)})).then((function(e){e.error?m(e.error):d(e)})).catch((function(e){m(e)}))}}),[n,t]),n?Object(L.e)(x.a,s()({inEditor:!0,component:"div",href:"https://www.zhihu.com/zvideo/".concat(t)},a)):p?Object(L.e)(z,{error:p}):u?Object(L.e)(M,s()({zvideo:u},a)):null}T.defaultProps={newLinkCard:!1};t.a=T},1275:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(34),r=n.n(a),i=n(36),o=n.n(i),c=n(123),s=n(1),l=n.n(s),u=n(7),d=n(1217),h=n(1218),f=n(1196),p=n(6),m=n.n(p),v=n(41),g=n(1262),b=n(1257),k=n(3),O=["children","pl","targetId","handleScroll","index"],y=["className"],C=["className"];var A={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},j={name:"160ybly",styles:"cursor:pointer;align-items:center;"},w=function(e){var t=e.children,n=e.pl,a=e.targetId,i=e.handleScroll,s=e.index,l=r()(e,O);return Object(k.e)(u.Text,o()({flexShrink:0,display:"flex",alignItems:"center",color:"GBK02A",fontSize:"12px",height:"20px",lineHeight:"19px",css:A},l),Object(k.e)(u.Flex,{pl:n,css:j,"data-catalog-target-id":a,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){i(e,s)}},Object(k.e)(u.Text,{css:Object(c.a)([Object(v.d)(1),{pointerEvents:"none",wordBreak:"break-all"}],""),dangerouslySetInnerHTML:{__html:t}}),Object(k.e)(d.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})))},x={name:"16fhh0i",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:6px;}"},L=function(e){var t=e.className,n=r()(e,y);return Object(k.e)(w,o()({className:m()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:x},n))},N={name:"q7f27s",styles:"&+.Catalog-FirstLevelTitle{margin-top:12px;}&+.Catalog-SecondLevelTitle{margin-top:0px;}"},M={name:"4g6ai3",styles:"cursor:pointer;"},z={name:"eg4v4b",styles:"margin-top:1px;"},T=l.a.forwardRef((function(e,t){var n=e.isFold,a=e.onClick,r=n?h.a:f.a,i=n?"展开目录":"收起目录";return Object(k.e)(l.a.Fragment,null,Boolean(n)&&Object(k.e)("div",{className:"bottom-shadow",css:function(e){return{position:"absolute",bottom:"25px",width:"100%",height:"40px",background:"linear-gradient(to bottom, ".concat(e.colorMod(e.colors.GBK99A).alpha(0),", ").concat(e.colors.GBK99A,")")}}}),Object(k.e)(u.Flex,{ref:t,alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",color:"GBL05A",css:M,onClick:a},i,Object(k.e)(r,{size:18,css:z})))})),R={1:L,2:function(e){var t=e.className,n=r()(e,C);return Object(k.e)(w,o()({className:m()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:N},n))}},E={name:"7cjcr7",styles:"& .Catalog-wrapper{position:relative;}"},I={name:"npr4z8",styles:"margin-bottom:18px !important;margin-top:0px !important;"};t.b=function(e){var t=e.catalog,n=e.className,a=e.canFold,r=e.inEditor,i=e.scrollOffset,o=void 0===i?0:i,c=a&&!r&&(null==t?void 0:t.length)>3,l=Object(s.useCallback)((function(e,t){if(r){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var a=Array.from(n.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Object(b.a)(a,o)}))}}}),[r,o]);return null!=t&&t.length?Object(k.e)(u.Box,{className:m()(n,"Catalog"),mb:"48px",css:E,"data-za-detail-view-name":"正文"},Object(k.e)("h2",{css:I},"目录"),Object(k.e)(u.Box,{className:"Catalog-wrapper"},Object(k.e)(u.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",overflow:"hidden",height:c?"84px":"auto"},t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,r=e.index;if(e.status===g.a.removed)return null;var i=R[t]||L;return Object(k.e)(i,{key:String([a,r]),targetId:a,handleScroll:l,index:r},n)}))),Boolean(c)&&Object(k.e)(T,{isFold:!0}))):r?Object(k.e)(u.Flex,{flexDirection:"column",alignItems:"center",mb:"18px"},Object(k.e)(u.Box,{size:"160px",mb:"10px"},Object(k.e)(u.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})),Object(k.e)(u.Text,{color:"GBK06A",fontSize:"17px",lineHeight:"24px",textAlign:"center"},"在内容中设置标题将会在此处同步展示")):null}},1276:function(e,t,n){"use strict";(function(t){var a=n(407),r=n(408),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function l(e){return(e||"").toString().replace(s,"")}var u=[["#","hash"],["?","query"],function(e,t){return f(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function h(e){var n,a=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},r={},o=typeof(e=e||a);if("blob:"===e.protocol)r=new m(unescape(e.pathname),{});else if("string"===o)for(n in r=new m(e,{}),d)delete r[n];else if("object"===o){for(n in e)n in d||(r[n]=e[n]);void 0===r.slashes&&(r.slashes=i.test(e.href))}return r}function f(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function p(e,t){e=l(e),t=t||{};var n,a=o.exec(e),r=a[1]?a[1].toLowerCase():"",i=!!a[2],c=!!a[3],s=0;return i?c?(n=a[2]+a[3]+a[4],s=a[2].length+a[3].length):(n=a[2]+a[4],s=a[2].length):c?(n=a[3]+a[4],s=a[3].length):n=a[4],"file:"===r?s>=2&&(n=n.slice(2)):f(r)?n=a[4]:r?i&&(n=n.slice(2)):s>=2&&f(t.protocol)&&(n=a[4]),{protocol:r,slashes:i||f(r),slashesCount:s,rest:n}}function m(e,t,n){if(e=l(e),!(this instanceof m))return new m(e,t,n);var i,o,s,d,v,g,b=u.slice(),k=typeof t,O=this,y=0;for("object"!==k&&"string"!==k&&(n=t,t=null),n&&"function"!=typeof n&&(n=r.parse),i=!(o=p(e||"",t=h(t))).protocol&&!o.slashes,O.slashes=o.slashes||i&&t.slashes,O.protocol=o.protocol||t.protocol||"",e=o.rest,("file:"===o.protocol&&(2!==o.slashesCount||c.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!f(O.protocol)))&&(b[3]=[/(.*)/,"pathname"]);y<b.length;y++)"function"!=typeof(d=b[y])?(s=d[0],g=d[1],s!=s?O[g]=e:"string"==typeof s?~(v=e.indexOf(s))&&("number"==typeof d[2]?(O[g]=e.slice(0,v),e=e.slice(v+d[2])):(O[g]=e.slice(v),e=e.slice(0,v))):(v=s.exec(e))&&(O[g]=v[1],e=e.slice(0,v.index)),O[g]=O[g]||i&&d[3]&&t[g]||"",d[4]&&(O[g]=O[g].toLowerCase())):e=d(e,O);n&&(O.query=n(O.query)),i&&t.slashes&&"/"!==O.pathname.charAt(0)&&(""!==O.pathname||""!==t.pathname)&&(O.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),a=n.length,r=n[a-1],i=!1,o=0;a--;)"."===n[a]?n.splice(a,1):".."===n[a]?(n.splice(a,1),o++):o&&(0===a&&(i=!0),n.splice(a,1),o--);return i&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(O.pathname,t.pathname)),"/"!==O.pathname.charAt(0)&&f(O.protocol)&&(O.pathname="/"+O.pathname),a(O.port,O.protocol)||(O.host=O.hostname,O.port=""),O.username=O.password="",O.auth&&(d=O.auth.split(":"),O.username=d[0]||"",O.password=d[1]||""),O.origin="file:"!==O.protocol&&f(O.protocol)&&O.host?O.protocol+"//"+O.host:"null",O.href=O.toString()}m.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||r.parse)(t)),i[e]=t;break;case"port":i[e]=t,a(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";i[e]=t.charAt(0)!==o?o+t:t}else i[e]=t;break;default:i[e]=t}for(var c=0;c<u.length;c++){var s=u[c];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.origin="file:"!==i.protocol&&f(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,n=this,a=n.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var i=a+(n.slashes||f(n.protocol)?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},m.extractProtocol=p,m.location=h,m.trimLeft=l,m.qs=r,e.exports=m}).call(this,n(100))},1277:function(e,t,n){e.exports=function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var i=function(e){var t="undefined"==typeof DOMParser?null:new DOMParser;return t?t.parseFromString(e,"text/html"):null},o=function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if("text/html"===a.type){a.getAsString((function(e){var n=i(e).querySelector("img");n&&n.src&&t(n.src)}));break}}},c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||navigator.msMaxTouchPoints>0)),d="undefined"!=typeof File,h={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",drop:"onTouchEnd",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",drop:"touchend",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",drop:"onDrop",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",drop:"drop",move:"mousemove",up:"mouseup"}}},f=u?h.touch:h.desktop,p="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,m=function(e){function i(){var e,t,n;a(this,i);for(var c=arguments.length,l=Array(c),u=0;u<c;u++)l[u]=arguments[u];return t=n=r(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(l))),n.state={drag:!1,my:null,mx:null,image:{x:.5,y:.5}},n.handleMouseDown=function(e){(e=e||window.event).preventDefault(),n.setState({drag:!0,mx:null,my:null})},n.handleMouseUp=function(){n.state.drag&&(n.setState({drag:!1}),n.props.onMouseUp())},n.handleMouseMove=function(e){if(e=e||window.event,!1!==n.state.drag){var t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,a=e.targetTouches?e.targetTouches[0].pageY:e.clientY,r={mx:t,my:a},i=n.props.rotate;if(i=(i%=360)<0?i+360:i,n.state.mx&&n.state.my){var o=n.state.mx-t,c=n.state.my-a,l=n.state.image.width*n.props.scale,u=n.state.image.height*n.props.scale,d=n.getCroppingRect(),h=d.x,f=d.y;h*=l,f*=u;var p=function(e){return e*(Math.PI/180)},m=Math.cos(p(i)),v=Math.sin(p(i)),g=f+-o*v+c*m,b={x:(h+o*m+c*v)/l+1/n.props.scale*n.getXScale()/2,y:g/u+1/n.props.scale*n.getYScale()/2};n.props.onPositionChange(b),r.image=s({},n.state.image,b)}n.setState(r),n.props.onMouseMove(e)}},n.handleDragOver=function(e){(e=e||window.event).preventDefault()},n.handleDrop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;if(e.stopPropagation(),e.preventDefault(),e.dataTransfer){var t=e.dataTransfer,a=t.files,r=t.items;a&&a.length?(n.props.onDropFile(e),n.loadImageFile(a[0])):r&&r.length&&o(r,(function(e){return n.loadImage(e)}))}},n.setCanvas=function(e){n.canvas=e},r(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t.Component),l(i,[{key:"isVertical",value:function(){return this.props.rotate%180!=0}},{key:"getBorders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,a=e.rotate,r=e.border,i={},o=this.getBorders(r),s=c(o,2),l=s[0],u=s[1],d=t,h=n;return this.isVertical()?(i.width=h,i.height=d):(i.width=d,i.height=h),i.width+=2*l,i.height+=2*u,{canvas:i,rotate:a,width:t,height:n,border:r}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var a=n.getContext("2d");return a.translate(n.width/2,n.height/2),a.rotate(this.props.rotate*Math.PI/180),a.translate(-n.width/2,-n.height/2),this.isVertical()&&a.translate((n.width-n.height)/2,(n.height-n.width)/2),a.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,a=document.createElement("canvas");return this.isVertical()?(a.width=n,a.height=t):(a.width=t,a.height=n),this.paintImage(a.getContext("2d"),this.state.image,0,1),a}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),a={x:e.x-t/2,y:e.y-n/2,width:t,height:n},r=0,i=1-a.width,o=0,c=1-a.height;return(t>1||n>1)&&(r=-a.width,i=1,o=-a.height,c=1),s({},a,{x:Math.max(r,Math.min(a.x,i)),y:Math.max(o,Math.min(a.y,c))})}},{key:"isDataURL",value:function(e){return null!==e&&!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i)}},{key:"loadImage",value:function(e){d&&e instanceof File?this.loadImageFile(e):"string"==typeof e&&this.loadImageURL(e)}},{key:"loadImageURL",value:function(e){var t=new Image;t.onload=this.handleImageReady.bind(this,t),t.onerror=this.props.onLoadFailure,!this.isDataURL(e)&&this.props.crossOrigin&&(t.crossOrigin=this.props.crossOrigin),t.src=e}},{key:"loadImageFile",value:function(e){var t=this,n=new FileReader;n.onload=function(e){return t.loadImageURL(e.target.result)},n.readAsDataURL(e)}},{key:"componentDidMount",value:function(){var e=n.findDOMNode(this.canvas).getContext("2d");if(this.props.image&&this.loadImage(this.props.image),this.paint(e),document){var t=f.native;document.addEventListener(t.move,this.handleMouseMove,!1),document.addEventListener(t.up,this.handleMouseUp,!1),u&&(document.addEventListener(t.mouseMove,this.handleMouseMove,!1),document.addEventListener(t.mouseUp,this.handleMouseUp,!1))}}},{key:"componentWillUnmount",value:function(){if(document){var e=f.native;document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),u&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1))}}},{key:"componentDidUpdate",value:function(e,t){var a=n.findDOMNode(this.canvas),r=a.getContext("2d");r.clearRect(0,0,a.width,a.height),this.paint(r),this.paintImage(r,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:"handleImageReady",value:function(e){var t=this.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,this.setState({drag:!1,image:t},this.props.onImageReady),this.props.onLoadSuccess(t)}},{key:"getInitialSize",value:function(e,t){var n=void 0,a=void 0,r=this.getDimensions();return r.height/r.width>t/e?a=e*((n=this.getDimensions().height)/t):n=t*((a=this.getDimensions().width)/e),{height:n,width:a}}},{key:"componentWillReceiveProps",value:function(e){(e.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height)&&this.loadImage(e.image)}},{key:"paintImage",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p;if(t.resource){var r=this.calculatePosition(t,n);e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(a,a),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,r.x,r.y,r.width,r.height),e.restore()}}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=this.getBorders(t),a=c(n,2),r=a[0],i=a[1],o=this.getCroppingRect(),s=e.width*this.props.scale,l=e.height*this.props.scale,u=-o.x*s,d=-o.y*l;return this.isVertical()?(u+=i,d+=r):(u+=r,d+=i),{x:u,y:d,height:l,width:s}}},{key:"paint",value:function(e){e.save(),e.scale(p,p),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t=this.props.borderRadius,n=this.getDimensions(),a=this.getBorders(n.border),r=c(a,2),i=r[0],o=r[1],s=n.canvas.height,l=n.canvas.width;t=Math.max(t,0),t=Math.min(t,l/2-i,s/2-o),e.beginPath(),function(e,t,n,a,r,i){if(0===i)e.rect(t,n,a,r);else{var o=a-i,c=r-i;e.translate(t,n),e.arc(i,i,i,Math.PI,1.5*Math.PI),e.lineTo(o,0),e.arc(o,i,i,1.5*Math.PI,2*Math.PI),e.lineTo(a,c),e.arc(o,c,i,2*Math.PI,.5*Math.PI),e.lineTo(i,r),e.arc(i,c,i,.5*Math.PI,Math.PI),e.translate(-t,-n)}}(e,i,o,l-2*i,s-2*o,t),e.rect(l,0,-l,s),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.getDimensions(),n={width:e.canvas.width,height:e.canvas.height,cursor:this.state.drag?"grabbing":"grab"},a={width:e.canvas.width*p,height:e.canvas.height*p,style:s({},n,this.props.style)};return a[f.react.down]=this.handleMouseDown,a[f.react.drag]=this.handleDragOver,this.props.disableDrop||(a[f.react.drop]=this.handleDrop),u&&(a[f.react.mouseDown]=this.handleMouseDown),t.createElement("canvas",s({ref:this.setCanvas},a))}}]),i}();return m.propTypes={scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(d?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),style:e.object,crossOrigin:e.oneOf(["","anonymous","use-credentials"]),onDropFile:e.func,onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func,disableDrop:e.bool},m.defaultProps={disableDrop:!1,scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],style:{},onDropFile:function(){},onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){}},m}(n(2),n(1),n(46))},1301:function(e,t,n){"use strict";var a=n(22),r=n.n(a),i=n(34),o=n.n(i),c=n(36),s=n.n(c),l=n(1),u=n.n(l),d=n(19),h=n(82),f=n.n(h),p=n(6),m=n.n(p),v=n(1276),g=n.n(v),b=n(56),k=n(1209),O=n(1198),y=n(3),C={answer:"回答",article:"文章",zvideo:"视频",question:"问题",collection:"收藏夹",roundtable:"圆桌",topic:"话题"},A={voteupCount:"赞同",commentCount:"评论",playCount:"播放",followerCount:"关注",answerCount:"回答",visitCount:"浏览"},j={answer:["voteupCount","commentCount"],article:["voteupCount","commentCount"],zvideo:["playCount","voteupCount"],question:["followerCount","answerCount"],collection:["visitCount","followerCount"],default:["followerCount","visitCount"]},w=function(e){var t=e.twoLine,n=e.children;return Boolean(n)&&Object(y.e)("span",{className:m()("LinkCard-title",{"two-line":t})},n)},x=function(e){var t=e.data,n=t.objectType,a=(j[n]||j.default).map((function(e){var n=t[e];return"".concat(Object(b.cnNiceNumber)(n)).concat(A[e])})).filter(Boolean).join(" · ");return Object(y.e)("span",{className:"LinkCard-desc"},a,Object(y.e)("span",{className:"LinkCard-tag"},C[n]))},L=function(e){var t=e.url,n=Object(l.useMemo)((function(){var e=null,n=g()(t,!0);return"link.zhihu.com"===n.hostname&&(e=n.query.target),(e||t).replace(/^https?:\/\//,"")}),[t]);return Object(y.e)("span",{className:"LinkCard-desc"},Object(y.e)(k.a,{size:14,center:!0}),n)},N=function(e){var t=e.url,n=e.isVideo,a=e.ratio,r=void 0===a?1:a,i=e.onClick;return Boolean(t)&&Object(y.e)("span",{className:"LinkCard-image",style:{height:60*r}},Object(y.e)("img",{src:t,onClick:i,alt:n?"点击可播放视频":""}),n&&Object(y.e)("span",{className:"LinkCard-image--video"},Object(y.e)(O.a,{size:10,center:!0})))},M=function(e,t){var n=e.url,a=e.data,r=e.onClick,i=e.onClickImage,o=a.title,c=a.thumbnail,s=a.objectType;return Object(y.e)(u.a.Fragment,null,Object(y.e)("span",{ref:t,className:"LinkCard-contents",onClick:r},Object(y.e)(w,{twoLine:!0},o),s?Object(y.e)(x,{data:a}):Object(y.e)(L,{url:n})),Object(y.e)(N,{url:c,isVideo:"zvideo"===s,onClick:i}))},z=u.a.forwardRef(M),T=n(2),R=n.n(T),E=n(73),I=n(1419),S=["text","target","url","image","imageWidth","imageHeight","component","className","size","children"],B=u.a.forwardRef((function(e,t){if(!e.notCommerce&&Object(I.b)(e.url))return Object(y.e)(I.a,s()({},e,{className:m()("old",e.className)}));var n=f()(e,["entityType","entityData","notCommerce"]),a=n.text,r=n.target,i=n.url,c=n.image,l=n.imageWidth,d=n.imageHeight,h=n.component,p=n.className,v=n.size,g=n.children,b=o()(n,S),k=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return"180x120";if(n<=.8)return"120x160"}return"ipico"}(l,d),O=Object(E.imgUrl)(c,k);return Object(y.e)(h,s()({ref:t,target:r,href:i,"data-draft-node":"block","data-draft-type":"link-card"},O&&{"data-image":O},l&&{"data-image-width":l},d&&{"data-image-height":d},v&&{"data-size":v},a!==i&&a&&{"data-text":a},{className:m()("LinkCard new",p)},b),g||Object(y.e)(u.a.Fragment,null,Object(y.e)("span",{className:"LinkCard-contents"},Object(y.e)("span",{className:"LinkCard-title loading","data-text":!0}),Object(y.e)("span",{className:"LinkCard-desc loading"})),Object(y.e)("span",{className:"LinkCard-image LinkCard-image--default"})))}));B.propTypes={component:R.a.oneOfType([R.a.string,R.a.func]),target:R.a.string,url:R.a.string.isRequired,text:R.a.string,image:R.a.string,imageWidth:R.a.oneOfType([R.a.string,R.a.number]),imageHeight:R.a.oneOfType([R.a.string,R.a.number])},B.defaultProps={component:"a",target:"_blank"};var D=B,P=n(44),U=n.n(P),F=n(108),V=n.n(F),q=n(30),_=n(65),Z=n.n(_),Q=n(21),H=n.n(Q),K=n(27),G=n.n(K),W=n(13),J=function(){function e(t){var n=this;H()(this,e),this.fetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.url||(n.url=e),e!==n.url)throw new Error("mismatch url\n".concat(e,"\n").concat(n.url),e,n.url);return new Promise((function(e,a){n.addToQueue({options:t,resolve:e,reject:a})}))},this.instance=null,this.customFetch=t,this.delay=200,this.maxDelay=1e3,this.url="",this.queueMaxLength=10,this.queue=[],this.startTime=Date.now(),this.timeout=null,this.initialized=!1}var t;return G()(e,[{key:"initConfig",value:function(e){var t=e.delay,n=e.maxDelay,a=e.maxBatchCount;t&&(this.delay=t),n&&(this.maxDelay=n),a&&(this.maxBatchCount=a),this.initialized=!0}},{key:"buildFetchParams",value:function(e){var t=r()(e,1)[0].options,n=e.reduce((function(e,t){var n,a;return(null===(n=(a=t.options).dataBuilder)||void 0===n?void 0:n.call(a,e,t))||e}),{}),a=this.url,i=!t.method||"GET"===t.method.toUpperCase();if(i){var o=g()(a,!0);o.query=Object.assign(Object.assign({},o.query),n),a=o.toString()}return[a,Object.assign(Object.assign({},t),{},{data:i?null:Object.assign(Object.assign({},t.data),n)})]}},{key:"doFetch",value:(t=V()(U.a.mark((function e(){var t,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.queue,this.queue=[],e.prev=4,e.next=7,this.customFetch.apply(this,Z()(this.buildFetchParams(t)));case 7:n=e.sent,t.forEach((function(e){var t=e.options,a=e.resolve;t.resultBuilder?a(t.resultBuilder(n)):a(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.forEach((function(t){return t.reject(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return t.apply(this,arguments)})},{key:"addToQueue",value:function(e){var t=this;this.initialized||this.initConfig(e.options),clearTimeout(this.timeout),(Date.now()-this.startTime>this.maxDelay||this.queue.length>=this.maxBatchCount)&&(this.startTime=Date.now(),this.doFetch()),this.queue.push(e),setTimeout((function(){t.startTime=Date.now(),t.doFetch()}),this.delay)}}]),e}(),X=null,Y=function(e){return function(t,n){return X||(X=new J(e)),X.fetch(t,n)}}(function(e){return function(){var t=V()(U.a.mark((function t(n,a){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,a);case 2:return r=t.sent,t.t0=W.camelizeKeys,t.next=6,r.json();case 6:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(fetch)),$={},ee=function(e){var t=Object(l.useRef)(0),n=e.inEditor,a=e["data-offset-key"],i=e["data-text"],o=e["data-image"],c=e.href,s=Object(l.useState)((function(){return n&&$[a]||null})),u=r()(s,2),d=u[0],h=u[1],f=Object(q.e)({once:!0}),p=r()(f,2),m=p[0],v=p[1],g=Object(q.c)((function(e){var t=e||d;if(!t||0===Object.keys(t).length)return{objectType:null,title:i||c,thumbnail:o};t.title=i||t.title||c,t.thumbnail=o||t.thumbnail;var r=Object.assign(Object.assign({},t),{},{cached:!0});return n&&($[a]=r),r})),b=Object(q.c)(V()(U.a.mark((function e(){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current+=1,e.prev=1,e.next=4,Y("https://www.zhihu.com/api/v4/link_card_infos",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},dataBuilder:function(e){return e.urls="".concat(e.urls?e.urls+",":"").concat(c),e},resultBuilder:function(e){return e[c]}});case 4:n=e.sent,h(g(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.current<=1?b():h(g());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))));return Object(l.useEffect)((function(){!v||d&&d.cached||b()}),[v,d,b]),Object(l.useEffect)((function(){n&&h(g())}),[n,g,i,o]),[m,d]},te=n(1352),ne=n(426),ae=["inEditor","data-text","href","zaBlock"],re={answer:"Answer",article:"Column",zvideo:"Zvideo",question:"Question",collection:"Collection",roundtable:"Roundtable",topic:"Topic"},ie=u.a.forwardRef((function(e,t){var n=f()(e,["zvideoLinkCardProps"]),a=n.inEditor,i=n["data-text"],c=n.href,u=n.zaBlock,h=o()(n,ae),p=Object(l.useRef)(),m=ee(e),v=r()(m,2),g=v[0],b=v[1],k=Object(te.a)(e,p,"zvideo"===(null==b?void 0:b.objectType)),O=k.handleImageClick,C=k.handleInfoClick,A=Object(l.useCallback)(Object(ne.a)(t,g,p),[]),j=a?z:d.a,w=a?null:{as:z,shouldTrackShow:!0,zaText:!0,zaType:"Button",zaAction:"OpenUrl",zaBlock:u,extra:{link:{url:c}},"data-za-module":"Content"},x=Object(y.e)(j,s()({},w,{url:c,data:b,onClick:C,onClickImage:O}));return Object(y.e)(D,s()({ref:A,text:i,url:c,component:"a"},h),Boolean(b)&&Object(y.e)(d.b,{content:{type:re[b.objectType]||"Unknown"}},x))}));t.a=ie},1303:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var a=n(34),r=n.n(a),i=n(21),o=n.n(i),c=n(27),s=n.n(c),l=n(26),u=n.n(l),d=n(32),h=n.n(d),f=n(17),p=n.n(f),m=n(36),v=n.n(m),g=n(1),b=n.n(g),k=n(25),O=function(e){return b.a.createElement(k.a,e,b.a.createElement("path",{d:"M16.296 7h.697A1.01 1.01 0 0 1 18 8.003v10.995c0 .554-.45 1.003-1.007 1.003H4.007A1.01 1.01 0 0 1 3 18.998V8.003C3 7.449 3.45 7 4.007 7h12.289zm-.892 11a.6.6 0 0 0 .597-.601V9.601A.597.597 0 0 0 15.405 9H5.596A.599.599 0 0 0 5 9.602v7.797c0 .335.267.601.596.601h9.808zM7 4h13a1 1 0 0 1 1 1v11a1 1 0 0 1-2 0V6.5c0-.5-.5-.5-.5-.5H7a1 1 0 0 1 0-2z",fillRule:"evenodd"}))};O.defaultProps={name:"Size"};var y=O,C=n(3);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h()(this,n)}}var j=function(e){u()(n,e);var t=A(n);function n(){var e;o()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleMouseMove=function(t){1!==t.buttons&&1!==t.which||e.handleChange(t)},e.handleChange=function(t){var n=e.input.value;e.value!==n&&(e.value=n,e.props.onChange&&e.props.onChange(t))},e}return s()(n,[{key:"componentDidMount",value:function(){this.value=this.input.value}},{key:"render",value:function(){var e=this;return Object(C.e)("input",v()({},this.props,{onMouseMove:this.handleMouseMove,onClick:this.handleChange,onKeyDown:this.handleChange,onChange:this.handleChange,ref:function(t){e.input=t}}))}}]),n}(g.Component),w=["className"];function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h()(this,n)}}var L=function(e){u()(n,e);var t=x(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=r()(e,w);return Object(C.e)("div",{className:t},Object(C.e)(y,{center:!0,size:18}),Object(C.e)(j,v()({type:"range",className:"RangeInput",min:"1",max:"2",step:"0.01"},n)),Object(C.e)(y,{center:!0,size:22}))}}]),n}(g.Component)},1305:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a,r=n(21),i=n.n(r),o=n(27),c=n.n(o),s=n(26),l=n.n(s),u=n(32),d=n.n(u),h=n(17),f=n.n(h),p=n(1),m=n.n(p),v=n(6),g=n.n(v),b=n(3);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}!function(e){e.BLACK="black",e.WHITE="white"}(a||(a={}));var O=function(e){l()(n,e);var t=k(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.maskClassName,a=e.shown,r=e.background,i=e.children,o=e.fullContent;return Object(b.e)("div",{className:g()("Mask",t,{"Mask-hidden":!a})},Object(b.e)("div",{className:g()("Mask-mask","Mask-mask--".concat(r),n)}),i&&Object(b.e)("div",{className:o?"Mask-content--full":"Mask-content"},i))}}]),n}(m.a.Component);O.defaultProps={shown:!1,background:a.BLACK};var y=O},1306:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));n(1),n(230),n(166),n(1257),n(1344),n(3);var a=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,r=(n(1275),n(1262)),i=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,o={h2:1,h3:2},c=function(e,t){return"h_".concat(e||"editor","_").concat(t)},s=function(e){return e.replace(a,"").replace(/<[^>]*>/g,"")},l=function(e){return o[e]},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var a=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(i,(function(e,i){var o,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",h=s(d),f=l(i),p=c(t,a.length),m=(null===(o=e.match(/(data-into-catalog-status=\\{0,1}"\S{1,}\\{0,1}")/))||void 0===o||null===(u=o[0])||void 0===u?void 0:u.indexOf(r.a.removed))>-1?r.a.removed:"";return a.push({text:h,titleLevel:f,Tag:i,targetId:p,status:m}),n({text:h,titleLevel:f,targetId:p,Tag:i,originText:d,status:m})})),{catalog:a,html:e}}},1313:function(e,t,n){"use strict";function a(e){var t=String(e);return t.length<2&&(t="0"+t),t}t.a=function(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(a(n),":").concat(a(t))}},1337:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return N}));var a=n(1),r=n.n(a),i=n(16),o=n(19),c=n(1257),s=function(e,t){var n=Object(o.i)().trackEvent,r=Object(a.useCallback)((function(a){!function(e,t,n){if(!e.defaultPrevented){var a=e.target.getAttribute("data-catalog-target-id");if(a){n({action:"OpenUrl",block:"ZTextCatalog",eventType:"Click",elementLocation:{type:"Button",text:e.target.innerText}},{link:{url:window.location.href}}),i.a.trackEvent(e.target);var r=t.querySelector("#"+a);r&&(e.preventDefault(),Object(c.a)(r,10,!1))}}}(a,t||e,n)}),[e,t,n]);Object(a.useEffect)((function(){if(e)return e.addEventListener("click",r),function(){e.removeEventListener("click",r)}}),[e,r])},l=n(22),u=n.n(l),d=n(34),h=n.n(d),f=n(36),p=n.n(f),m=n(46),v=(n(436),n(52)),g=n.n(v),b=n(30),k=(n(54),n(98)),O=(n(64),n(745),n(426),n(168));var y="function"==typeof Image,C={},A=(y&&O((function(e){return new Promise((function(t){return n=e,a=function(e,n){C[e]=n,t(n)},(r=new Image).onload=function(){var e=r.width>0&&r.height>0;a(n,e)},r.onerror=function(){a(n,!1)},void(r.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,a,r}))})),n(3)),j=n(93),w=n.n(j),x=n(73);w()((function(){return/Mobile/.test(navigator.userAgent)}));var L,N=function(e,t){var n=Object(b.c)((function(n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var a=e.target.getAttribute("href"),r=t.querySelector(a);if(r){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);r.focus({preventScroll:!0}),Object(c.a)(r),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(a.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},M=(n(596),"function"==typeof queueMicrotask&&queueMicrotask,["root"]),z=function(e){return function(t){var n=Object(a.useState)(null),r=u()(n,2),i=r[0],o=r[1],c=e.idAttr,s=e.selector,l=e.component,d=e.targetClassName,f=e.cardDataFilter,v=e.getCardProps,b=t.root,k=h()(t,M),O=c&&s&&d&&Object(a.useCallback)(function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var a=e.getAttribute(t),r=document.createElement("div");return r.className=n,e.parentNode.replaceChild(r,e),{data:{id:a},target:r}}}({idAttr:c,targetClassName:d}),[c,d]),y=Object(a.useMemo)((function(){return O?function(e){return Array.from(e.querySelectorAll(s)).map(O)}:g.a}),[O,b,s]);return Object(a.useEffect)((function(){if(b||s&&f){var e=(f||y)(b).map((function(e){var t=e.data,n=e.target,a=null;return"function"==typeof v&&(a=v(t)),Object(m.createPortal)(Object(A.e)(l,p()({key:t.id,id:t.id},a,k)),n)}));e.length>0&&o(e)}}),[b]),i}},T=(z({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:n(1347).a}),n(13)),R=n(1258),E=n(246),I=n.n(E),S=n(6),B=n.n(S),D=n(110),P=n.n(D),U=n(56),F=function(e){var t=e.authorName,n=e.voteupCount;return Object(A.e)(r.a.Fragment,null,P()(L||(L=I()(["","的文章"])),t),n>=100&&" · ".concat(Object(U.cnNiceNumber)(n),"赞同"))};function V(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,i=e.excerptText,o=e.imgUrlSrc,c=e.voteupCount,s=e.commentCount;return Object(A.e)("div",{className:"ArticleLinkCard",ref:t},Object(A.e)("span",{className:"ArticleLinkCard-title"},r),Boolean(i)&&Object(A.e)("div",{className:"ArticleLinkCard-excerpt"},i),o&&Object(A.e)("div",{className:"ArticleLinkCard-imageWrapper"},Object(A.e)("img",{src:Object(x.imgUrl)(o,"540x300"),className:"ArticleLinkCard-image",alt:""})),Object(A.e)("div",{className:"ArticleLinkCard-bottom"},Object(A.e)("span",{className:"ArticleLinkCard-hint"},"".concat(Object(U.cnNiceNumber)(c),"赞同 · ").concat(Object(U.cnNiceNumber)(s),"评论")),n&&Object(A.e)("span",{onClick:a,className:"ArticleLinkCard-hybridLink"},"查看完整文章")),Object(A.e)("div",{className:"ArticleLinkCard-bottomCardGradient"}))}function q(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,i=e.content,o=e.imgUrlSrc,c=e.voteupCount,s=e.authorName,l=e.avatarUrl;return Object(A.e)("div",{className:"ArticleLinkCard AvatarArticleLinkCard",ref:t},Object(A.e)("div",{className:"AvatarArticleLinkCard-info"},Object(A.e)("div",{className:"AvatarArticleLinkCard-hint"},l&&Object(A.e)("img",{className:"AvatarArticleLinkCard-avatar",src:l,alt:""}),Object(A.e)(F,{authorName:s,voteupCount:c})),n&&Object(A.e)("span",{onClick:a,className:"AvatarArticleLinkCard-hybridLink"},"查看全文")),Object(A.e)("span",{className:"ArticleLinkCard-title"},r),Object(A.e)("div",{className:B()("ArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!o})},Object(A.e)("div",{dangerouslySetInnerHTML:{__html:i}})),!o&&Object(A.e)("span",{className:"AvatarArticleLinkCard-more"},"更多内容"),o&&Object(A.e)("img",{className:"AvatarArticleLinkCard-image",src:o,alt:""}))}function _(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,r=e.title,i=e.content,o=e.imgUrlSrc,c=e.voteupCount,s=e.authorName;return Object(A.e)("div",{className:"ArticleLinkCard QuoteArticleLinkCard",ref:t},Object(A.e)("span",{className:"ArticleLinkCard-title"},r),Object(A.e)("div",{className:"QuoteArticleLinkCard-hint"},Object(A.e)(F,{authorName:s,voteupCount:c})),Object(A.e)("div",{className:B()("ArticleLinkCard-content QuoteArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!o})},Object(A.e)("div",{dangerouslySetInnerHTML:{__html:i}})),!o&&n&&Object(A.e)("div",{onClick:a,className:"QuoteArticleLinkCard-hybridLink"},"查看全文"),o&&Object(A.e)("img",{className:"QuoteArticleLinkCard-image",src:o,alt:""}))}function Z(e){var t=e.article,n=t.title,r=t.excerpt,i=t.content,o=t.imageUrl,c=t.voteupCount,s=t.commentCount,l=t.author,u=void 0===l?{}:l,d=e.styleAbParam,h=e.cardRef,f=e.useOpenArticleButton,p=e.handleClickLink,m=Object(a.useMemo)((function(){var e=document.createElement("div");return e.innerHTML=r,e.textContent}),[r]),v=u.name,g=u.avatarUrl;return"1"===d?Object(A.e)(q,{cardRef:h,useOpenArticleButton:f,handleClickLink:p,title:n,content:i,imgUrlSrc:o,voteupCount:c,authorName:v,avatarUrl:g}):"2"===d?Object(A.e)(_,{cardRef:h,useOpenArticleButton:f,handleClickLink:p,title:n,content:i,imgUrlSrc:o,voteupCount:c,authorName:v}):Object(A.e)(V,{cardRef:h,useOpenArticleButton:f,handleClickLink:p,title:n,excerptText:m,imgUrlSrc:o,voteupCount:c,commentCount:s})}var Q=["id","useOpenArticleButton","enableZa","styleAbParam"],H=function(e){var t=e.article.id,n=e.article,r=e.useOpenArticleButton,c=e.enableZa,s=e.styleAbParam,l=Object(a.useRef)(null);Object(a.useEffect)((function(){c&&(i.a.setModule(l.current,{module:"Content"},{card:{content:{type:"Post",token:String(t)}}}),i.a.trackCardShow(l.current,{id:8589,element:"Card"}))}),[c,t]);var u="https://zhuanlan.zhihu.com/p/".concat(t),d=Object(a.useCallback)((function(){c&&i.a.trackEvent(l.current,{id:8590,action:"OpenUrl",element:"Card"})}),[c]);return Object(A.e)(o.c,{as:"a",shouldTrackShow:!0,shouldTrackClick:!0,zaBlock:"ZTextArticleLinkCard",zaAction:"OpenUrl",zaType:"Button",zaEventType:"Click",extra:{link:{url:u}},href:u,"data-za-not-track-link":!0,onClick:d,rel:"noopener noreferrer",target:"_blank"},Object(A.e)(Z,{styleAbParam:s,cardRef:l,useOpenArticleButton:r,linkUrl:u,handleClickLink:d,article:n}))},K=(z({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type"),r="normal"===e.getAttribute("data-size");if(!n||!a||!r)return null;var i=null===(t=n.match(/https:\/\/zhuanlan.zhihu.com\/p\/(\d+)$/))||void 0===t?void 0:t[1];if(i){var o=document.createElement("div");return o.className="RichText-ArticleLinkCardContainer",e.parentNode.replaceChild(o,e),{data:{id:i},target:o}}return null})).filter(Boolean)},component:function(e){var t=e.id,n=e.useOpenArticleButton,r=e.enableZa,i=e.styleAbParam,o=h()(e,Q),c=Object(a.useState)(null),s=u()(c,2),l=s[0],d=s[1],f=Object(a.useState)(null),m=u()(f,2),v=m[0],g=m[1],b=i&&["1","2"].includes(i)?"1":"0";return Object(a.useEffect)((function(){var e="https://www.zhihu.com/api/v4/articles/".concat(t,"?is_article_card=").concat(b);Object(R.a)(e).then((function(e){return Object(T.camelizeKeys)(e)})).then((function(e){e.error?g(e.error.message):d(e)})).catch((function(e){g(e.message||"未知错误")}))}),[t,b]),v?Object(A.e)("div",{className:"ArticleLinkCard-error"},v):l?Object(A.e)(H,p()({article:l,useOpenArticleButton:n,enableZa:r,styleAbParam:i},o)):Object(A.e)("div",{className:"ArticleLinkCard-loading"},"加载中...")}}),n(404)),G=(z({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:K.a}),n(1301)),W=(z({cardDataFilter:function(e){return Array.from(e.querySelectorAll("a.LinkCard[data-draft-type=link-card]:not([data-is-ecommerce])")).map((function(e){var t,n=(t=e.attributes,Array.from(t).reduce((function(e,t){return"class"===t.name?e.className=t.value:e[t.name]=t.value,e}),{})),a=document.createElement("div");return a.className="RichText-LinkCardContainer",e.parentNode.replaceChild(a,e),{data:n,target:a}}))},getCardProps:function(e){return e.href&&e.href.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)?e.zaBlock="ZTextZVideoLinkCard":e.zaBlock="ZTextLinkCard",e},component:G.a}),n(38)),J=n.n(W),X=n(414),Y=n(102),$=n.n(Y);z({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.id,n=e.onClick,r=Object(a.useRef)(!1),o=Object(a.useState)({}),c=u()(o,2),s=c[0],l=c[1],d=Object(a.useState)(!1),h=u()(d,2),f=h[0],p=h[1];return Object(a.useEffect)((function(){Object(R.a)("https://www.zhihu.com/api/v4/market/km_sku_card/".concat(t),{credentials:"same-origin"}).then((function(e){var n=Object(T.camelizeKeys)(e)||{},a=n.title,r=n.desc,i=n.cover,o=n.button,c=n.resourceId,s=n.resourceName,u=n.price,d=n.error,h={};!$()(e)&&$()(d)&&(h=J()({},t,{id:t,skuId:c,source:2,productType:1,cardType:"cpsCommonCard",goods:{title:a,subtitle:r,price:{price:u},goodsImg:{imgUrl:i,imgShape:"rectangle",cornerText:s},goodsUrl:{url:null==o?void 0:o.url},btnText:"去查看"}})),l(h),p(!0)})).catch((function(){p(!0)}))}),[t]),f&&!$()(s)?Object(A.e)(X.a,null,Object(A.e)(K.a,{id:t,ref:function(e){e&&!e.classList.contains("GoodsRecommendCard-placeholder")&&!1===r.current&&(i.a.setModule(e,{module:"Content"},{card:{content:{id:t}}}),Object(k.onViewedOnce)(e,(function(){i.a.trackCardShow(e,{id:7203})})),r.current=!0)},originalBlockText:"ZTextMkSKuLinkCard",originalData:s,onClick:function(e){i.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),n&&n(e)}})):null}}),z({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type");if(!n||!a)return null;var r=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(r){var i=document.createElement("div");return i.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(i,e),{data:{id:r},target:i}}return null})).filter(Boolean)},component:n(1273).a}),n(7),n(1275);n(1352)},1344:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(225),o=n.n(i),c=n(3);t.a=function(e){var t=e.referenceList,n=e.onClick,a=e.listRef;return Object(c.e)(r.a.Fragment,null,Object(c.e)("h2",null,"参考"),Object(c.e)("ol",{className:"ReferenceList",onClick:n,ref:a},o()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),a=n.length>1?Object(c.e)(r.a.Fragment,null,Object(c.e)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(c.e)("sup",{key:n,className:"ReferenceList-backLink"},Object(c.e)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(c.e)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(c.e)("li",{id:e.refKey,key:e.refKey,tabIndex:0},a,e.text&&Object(c.e)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(c.e)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))}},1347:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(1);var a=n(2),r=n.n(a),i=n(30),o=n(3);function c(e){var t=e.id,a=e.parentType,r=e.parentId,c=e.suger,s=e.data,l=e.isEditor,u=void 0!==l&&l,d=Object(i.d)((function(){return Promise.all([n.e(2),n.e(7)]).then(n.bind(null,1666))}),t),h=Object(i.d)((function(){return n.e(8).then(n.bind(null,1663))}),t);return t.startsWith("fee_")&&h?Object(o.e)(h,{id:t,isEditor:u}):d?Object(o.e)(d,{id:t,parentType:a,urlToken:r,suger:c,data:s,isEditor:u}):null}c.propTypes={id:r.a.string.isRequired,parentType:r.a.oneOf(["answer","article"]),parentId:r.a.string,suger:r.a.object,data:r.a.object,isEditor:r.a.bool};var s=c},1352:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var a=n(1),r=n(98),i=n(16),o=n(30),c=function(e){i.a.trackCardShow(e,{id:7844},{button:{text:"inlinezvideo"}})},s=function(e,t,n){var a;i.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)},l=function(e,t,n){var a;i.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)};t.a=function(e,t,n){var i=e["data-text"],u=e.href,d=e.zvideoLinkCardProps;Object(a.useEffect)((function(){n&&Object(r.onViewedOnce)(t.current,(function(){return c(t.current)}))}),[n,t]);var h=Object(o.c)((function(e){s(e,{title:i,url:u,video:{}})})),f=Object(o.c)((function(e){l(e,d,{title:i,url:u})}));return n?{handleImageClick:h,handleInfoClick:f}:{}}},1419:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var a=n(34),r=n.n(a),i=n(36),o=n.n(i),c=(n(1),n(82)),s=n.n(c),l=n(6),u=n.n(l),d=n(3),h=["target","url","image","imageWidth","imageHeight","component","size","className"],f=function(e){return e.includes("BIZ=ECOMMERCE")||e.includes(encodeURIComponent("BIZ=ECOMMERCE"))},p=function(e){return Object(d.e)("div",e,Object(d.e)("span",null),Object(d.e)("span",null))},m=function(e){var t=s()(e,["entityType","entityData","newLinkCard"]),n=t.target,a=t.url,i=t.image,c=t.imageWidth,l=t.imageHeight,f=t.component,m=t.size,v=t.className,g=r()(t,h);return Object(d.e)(f,o()({target:n,href:a,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1","data-image":i},c&&{"data-image-width":c},l&&{"data-image-height":l},m&&{"data-size":m},{className:u()("LinkCard",v)},g),Object(d.e)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard"},Object(d.e)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper"},Object(d.e)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})),Object(d.e)(p,{className:"LinkCard-ecommerceLoadingCardLoadingbar"})))};m.defaultProps={component:"a",target:"_blank"};t.a=m},1430:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(25),o=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{d:"M6 2h8l6 6v12c0 1.243-.757 2-2 2H6c-1.243 0-2-.757-2-2V4c0-1.243.757-2 2-2zm1.5 8.5V12h9v-1.5h-9zm0 6H12V18H7.5v-1.5zm0-3h9V15h-9v-1.5zM14 4v4h4l-4-4z",fillRule:"evenodd"}))};o.defaultProps={name:"Document"},t.a=o}}]);
//# sourceMappingURL=column.shared_9008f0c1b91e9f05aafcc5db7f3f2a398a47ab5f.9c32ea579cb4945e4ef9.js.map