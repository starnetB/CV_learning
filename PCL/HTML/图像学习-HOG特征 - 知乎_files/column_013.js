(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1659:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return U}));var c=a(22),n=a.n(c),o=a(1),s=a.n(o),i=a(6),l=a.n(i);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.trimZero,c=void 0!==a&&a,n=String(e).padStart(2,"0").slice(-2);return c&&"00"===n?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(n)}var d=a(2),u=a.n(d),m=a(16),b=a(1187),v=a(36),O=a.n(v),j=a(3);var p=function(e){var t=e.width,a=void 0===t?"10":t,c=e.height,n=void 0===c?"10":c;return Object(j.e)("svg",O()({width:a,height:n,viewBox:"0 0 10 10",fill:"none"},e),Object(j.e)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 0C7.76142 0 10 2.23858 10 5C10 7.76142 7.76142 10 5 10C2.23858 10 0 7.76142 0 5C0 2.23858 2.23858 0 5 0ZM5 1C2.79086 1 1 2.79086 1 5C1 7.20914 2.79086 9 5 9C7.20914 9 9 7.20914 9 5C9 2.79086 7.20914 1 5 1ZM5 2C5.27614 2 5.5 2.22386 5.5 2.5V4.21902C5.5 4.54533 5.65921 4.85112 5.92654 5.03825L7.37712 6.05365C7.60334 6.21201 7.65836 6.52378 7.5 6.75C7.34164 6.97622 7.02988 7.03124 6.80365 6.87288L4.92654 5.5589C4.65921 5.37178 4.5 5.06599 4.5 4.73967V2.5C4.5 2.22386 4.72386 2 5 2Z",fill:"white"}))},g=a(344),f="GoodsItemCardPromo",C=function(e){var t=e.countdown,a=Object(o.useState)(t),c=n()(a,2),i=c[0],l=c[1],r=Object(o.useRef)();Object(o.useEffect)((function(){return i<=0?(clearInterval(r.current),void l(0)):(r.current=setInterval((function(){l(i-1)}),1e3),function(){return clearInterval(r.current)})}),[i]);var d=Object(g.b)(i),u=d.d,m=d.h,b=d.m,v=d.s,O="".concat(u?u+"天":""," ").concat(m,":").concat(b,":").concat(v);return Object(j.e)("div",{className:f},Object(j.e)("div",{className:"".concat(f,"-left")},Object(j.e)(p,{className:"".concat(f,"-icon")}),Object(j.e)("span",null,"限时秒杀")),Object(j.e)("div",{className:"".concat(f,"-right")},i?Object(j.e)(s.a.Fragment,null,Object(j.e)("span",null,"距结束还剩 "),Object(j.e)("span",{className:"".concat(f,"-rightText")},O)):Object(j.e)("span",null,"活动已结束")))},h=a(452),k=a(13),N=function(e){var t=e.className,a=e.style,c=e.id,n=e.skuId,s=e.imgUrl,i=e.title,d=e.price,u=void 0===d?0:d,v=e.underlinePrice,O=void 0===v?0:v,p=e.source,g=e.productType,f=e.subtitle,N=e.tags,y=void 0===N?[]:N,I=e.promoInfo,w=void 0===I?{}:I,S=e.showBottomLine,G=void 0!==S&&S,T=e.zaData,F=void 0===T?{}:T,_=e.onClick,L=Number((null==w?void 0:w.countdown)||0)>0;Object(o.useEffect)((function(){(null==F?void 0:F.showId)&&m.a.trackCardShow(null,{id:null==F?void 0:F.showId,path:[{module_name:"".concat(c,"_").concat(n,"_").concat(p,"_").concat(g)}]})}),[]);return Object(j.e)("div",{className:l()("GoodsItemCard",{"GoodsItemCard-promo":L},t),style:a,onClick:function(){(null==F?void 0:F.clickId)&&m.a.trackEvent(null,{id:null==F?void 0:F.clickId,action:"OpenUrl",path:[{module_name:"".concat(c,"_").concat(n,"_").concat(p,"_").concat(g)}]}),"function"==typeof _&&_()}},L&&Object(j.e)(C,{countdown:(null==w?void 0:w.countdown)||0}),Object(j.e)("div",{className:"GoodsItemCard-main"},Object(j.e)("div",{className:"GoodsItemCard-left"},Object(j.e)("div",{className:"GoodsItemCard-imgLayer"}),Object(j.e)("img",{className:"GoodsItemCard-imgUrl",src:s,alt:""})),Object(j.e)("div",{className:"GoodsItemCard-right"},Object(j.e)("div",{className:"GoodsItemCard-title"},i),!!y.length&&Object(j.e)(h.a,{className:"GoodsItemCard-tags",tags:Object(k.camelizeKeys)(y)}),Object(j.e)("div",{className:"GoodsItemCard-footer"},Object(j.e)("div",{className:"GoodsItemCard-priceBox"},Object(j.e)("span",{className:"GoodsItemCard-price"},"¥".concat(r(u))),!!O&&Object(j.e)("span",{className:"GoodsItemCard-underlinePrice"},"¥".concat(r(O)))),Object(j.e)("div",{className:"GoodsItemCard-source"},f,Object(j.e)(b.a,{size:20,center:!0})))),Object(j.e)("div",{className:"GoodsItemCard-bottomLine",style:{display:G?"block":"none"}})))};N.prototype={className:u.a.string,style:u.a.object,id:u.a.string,skuId:u.a.string,imgUrl:u.a.string.isRequired,title:u.a.string.isRequired,subtitle:u.a.string,price:u.a.number,source:u.a.string.isRequired,showBottomLine:u.a.bool,tags:u.a.array,zaData:u.a.object,promoInfo:u.a.object,onClick:u.a.func};var y=N,I=a(755),w=a(38),S=a.n(w),G=function(){return Object(j.e)(s.a.Fragment,null)},T={SkeletonH01:function(e){var t=e.lineClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t}))},SkeletonP01:function(e){var t=e.lineClass,a=e.blockClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",{className:a}),Object(j.e)("div",null,Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t})))},SkeletonT01:function(e){var t=e.lineClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t}))},SkeletonT02:function(e){var t=e.lineClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t}))},SkeletonC01:function(e){var t=e.lineClass,a=e.blockClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",{className:a}),Object(j.e)("div",null,Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t})))},SkeletonC02:function(e){var t=e.lineClass,a=e.blockClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",null,Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t})),Object(j.e)("div",{className:a}))},SkeletonC03:function(e){var t=e.lineClass,a=e.blockClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",{className:a}),Object(j.e)("div",{style:{width:"100%"}},Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t})))},SkeletonC04:function(e){var t=e.lineClass,a=e.blockClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",{className:"".concat(a,"-1")}),Object(j.e)("div",{className:a}),Object(j.e)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},Object(j.e)("div",{className:t}),Object(j.e)("div",{className:t})))},SkeletonI01:function(e){var t=e.blockClass;return Object(j.e)(s.a.Fragment,null,Object(j.e)("div",{className:t}))},SkeletonSpacing:G,SkeletonFill:G},F=s.a.memo((function(e){var t,a=e.variant,c=void 0===a?"H01":a,n=e.height,o=e.width,s=void 0===o?"auto":o,i=e.animation,r=void 0===i?"ease-in":i,d="skeleton__line--".concat(c.toLowerCase()),u="skeleton--".concat(c.toLowerCase()),m=l()(S()({skeleton__block:!0},"skeleton__block--".concat(c.toLowerCase()),!0)),b=l()(S()({skeleton__line:!0},d,!0)),v=l()((t={skeleton:!0},S()(t,u,!0),S()(t,"skeleton--ease-in","ease-in"===r),t)),O={width:s};n&&["Spacing","Fill"].includes(c)&&(O.height="number"==typeof n?"".concat(n,"px"):n);var p=T["Skeleton".concat(c)];return Object(j.e)("section",{className:v,style:O},Object(j.e)(p,{variant:c,lineClass:b,blockClass:m}))}));F.propTypes={variant:u.a.string,height:u.a.oneOfType([u.a.string,u.a.number]),width:u.a.oneOfType([u.a.string,u.a.number]),animation:u.a.oneOfType([u.a.bool,u.a.string])};var _=F;var L=s.a.memo((function(e){var t=e.content,a=function(e){return("string"==typeof e?e.split(","):e).map((function(e){var t=e.split("-"),a=n()(t,2),c=a[0],o=a[1];return["Spacing","Fill"].includes(c)?{type:c,height:+o}:{type:c,count:+o||1}}))}(void 0===t?"T01":t);return Object(j.e)(s.a.Fragment,null,a.map((function(e,t){var a=e.type,c=e.count,n=e.height;return c?Array.from({length:c}).map((function(e,c){return Object(j.e)(_,{variant:a,key:"".concat(t,"-").concat(c)})})):Object(j.e)(_,{variant:a,height:n,key:"".concat(t,"-").concat(n)})})))}));L.prototype={content:Object(d.oneOfType)([Object(d.arrayOf)(d.string),d.string])};var z=L,B=a(19),P=a(287),M=a(705),R=function(e){var t=e.className,a=e.style,c=e.showModal,i=void 0===c||c,r=e.withModal,d=void 0===r||r,u=e.modalTitle,b=void 0===u?"":u,v=e.id,O=e.url,p=void 0===O?"":O,g=e.fetcherOptions,f=void 0===g?{}:g,C=e.scenes,h=void 0===C?0:C,N=e.onClose,w=Object(M.a)(),S=Object(o.useState)(0),G=n()(S,2),T=G[0],F=G[1],_=Object(o.useState)(!1),L=n()(_,2),R=L[0],U=L[1],x=Object(o.useState)([]),E=n()(x,2),D=E[0],K=E[1],Z=Object(o.useState)([]),q=n()(Z,2),A=q[0],H=q[1],J=Object(o.useState)(!1),V=n()(J,2),Q=V[0],W=V[1];Object(o.useEffect)((function(){m.a.trackCardShow(null,{id:10331,path:[{module_name:v}]})}),[]),Object(o.useEffect)((function(){U(!0);var e=p||"/api/v4/mcn/linkcard/".concat(v,"/goods?scenes=").concat(h);Object(P.a)(e,f).then((function(e){var t=Object(k.camelizeKeys)((null==e?void 0:e.data)||{}),a=t.goods,c=t.similarGoods;K(a||[]),H(c||[]),W(!1)})).catch((function(){W(!0)})).finally((function(){setTimeout((function(){U(!1)}),500)}))}),[v,T]);var X=Object(j.e)(B.e,{zaBlock:"goodsRecommend_polymericPopupPage",zaType:"Page",as:"div",className:"GoodsCardList-container"},R?Object(j.e)(s.a.Fragment,null,Object(j.e)(z,{content:"C03,Spacing-26,C03",height:72})):Q?Object(j.e)("div",{className:"GoodsCardList-error"},Object(j.e)("div",{className:"GoodsCardList-errorDesc"},"Oops~ 出错了"),Object(j.e)("div",{className:"GoodsCardList-errorBtn",onClick:function(){F(T+1)}},"刷新重试")):Object(j.e)(s.a.Fragment,null,[D,A].map((function(e,t){return e.length?Object(j.e)(o.Fragment,{key:t},e.map((function(e,a){var c=Object(k.camelizeKeys)(e),n=c.id,s=c.goods,i=c.tags,l=c.promoInfo,r=c.attachedInfoBytes,d=s||{},u=d.skuId,m=d.title,b=d.subtitle,v=d.goodsImg,O=d.goodsUrl,p=d.price,g=d.source,f=d.productType,C=p||{},N=C.price,I=C.underlinePrice;return Object(j.e)(o.Fragment,{key:"".concat(u,"-").concat(t,"-").concat(a)},1===t&&0===a&&Object(j.e)("div",{className:"GoodsCardList-similarText"},"相似商品"),Object(j.e)(B.b,{content:{type:"GoodsRecommend",id:String(u),token:String(n)},extra:{attachedInfoBytes:r,link:{url:null==O?void 0:O.url}}},Object(j.e)(B.e,{shouldTrackClick:!0,className:"GoodsCardList-listItem",zaBlock:"goodsRecommend_polymericPopupCard",zaType:"Card",zaAction:"OpenUrl",zaEventType:"Click"},Object(j.e)(y,{id:n,skuId:u,title:m,imgUrl:null==v?void 0:v.imgUrl,price:N,underlinePrice:I,source:g,subtitle:b,productType:f,showBottomLine:!1,zaData:{showId:10371,clickId:10372},tags:i,promoInfo:l,onClick:function(){return function(e){var t=Object(k.camelizeKeys)(e),a=t.id,c=t.goods||{},n=c.goodsUrl,o=c.source,s=n.url,i=n.iosSchema,l=n.androidSchema;w({id:a,url:s,source:o,scenes:h,appSchemaIos:i,appSchemaAndroid:l})}(e)}}))))}))):null}))));return d?Object(j.e)(I.a,{className:l()("GoodsCardList",t),style:a,size:"large",title:b,onClose:N},i&&X):X};R.prototype={className:u.a.string,style:u.a.object,showModal:u.a.bool,withModal:u.a.bool,modalTitle:u.a.string,id:u.a.string,url:u.a.string,fetcherOptions:u.a.object,scenes:u.a.number,onClose:u.a.func,onSelectCard:u.a.func};var U=R}}]);
//# sourceMappingURL=column.GoodsRecommendGoodsCardList.6f8f204ac69a299e9898.js.map