webpackJsonp([0],{cVme:function(t,e){},grgC:function(t,e){},"vT+3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("aA9S"),r=i.n(s),a=i("rVsN"),o=i.n(a),c=i("LTzH"),n=i("VqY/"),p={getTemplatequery:function(t,e,i){return e&&(e=parseInt(e)),new o.a(function(s,r){c.a.get(n.a.API_PREVIEW_URL+"ad/template/"+t+"?positionId="+e+"&queryWord="+i).then(function(t){var e=t.data.data;e&&(e.templateContent=JSON.parse(e.templateContent),s(t.data))}).catch(function(t){r(t)})})}},l={name:"preview",data:function(){return{reportClick:"",preview:{},imgWidth:95,imgHeight:71,contentMarginLeft:106,clientObj:{},clients:[{id:"1",name:"华为云"},{id:"2",name:"广告"}],showAdCloseaLink:!1,isAdClosed:!1,type:"",fType:""}},created:function(){var t=this;if(this.$route.params.id){var e=this.$route.query.positionId?this.$route.query.positionId:"",i=this.$route.query.queryWord?this.$route.query.queryWord:"",s=this.$route.query.spm?this.$route.query.spm:"";this.getTemplatequery(this.$route.params.id,e,i,s)}else this.preview=r()({},this.templateData),this.type=this.templateType,this.fType=this.feedType,this.getImgArr();this.clients.map(function(e){t.clientObj[e.id]=e.name})},filters:{filterClient:function(t,e){if(e[t])return e[t];return"广告"}},watch:{feedType:function(t,e){this.fType=t},templateType:function(t,e){this.type=t},templateData:function(t,e){this.preview=r()({},t),this.getImgArr()}},props:{templateData:Object,templateType:String,feedType:String},methods:{reportByImgUrl:function(t){var e=document.createElement("img");e.style.display="none",e.src=t,e.addEventListener("load",function(){e.remove()}),document.body.append(e)},getImgArr:function(){if(this.preview.imgUrl&&("3"===this.fType||"3"===this.type)){var t;t=this.preview.imgUrl.split(","),this.preview.imgUrl=t}},getTemplatequery:function(t,e,i,s){var r=this;p.getTemplatequery(t,e,i).then(function(t){if(200===t.status){var a=t.data;if(!a)return;r.preview=a.templateContent,r.preview.bottomingAdInfo&&r.preview.bottomingAdInfo.isShow&&(r.showAdCloseaLink=!0),r.type=a.templateType,r.fType=r.preview.feedType,r.getImgArr(),r.reportClick=""!==s?'{"mod":"kp_popu_'+e+"-"+a.adContentId+'","keyword":"'+i+'","spm":"'+s+'"}':'{"mod":"kp_popu_'+e+"-"+a.adContentId+'","keyword":"'+i+'"}'}}).catch(function(t){})},jumpToPreview:function(t){window.open(""+t)},closeAd:function(){this.isAdClosed=!0,this.preview.closeAdClickUrl&&this.reportByImgUrl(this.preview.closeAdClickUrl)}}},v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"preview-wrapper"},[t.isAdClosed?i("div",{staticClass:"close-ad-wrapper"},[i("p",[t._v("CSDN已关闭此广告")]),t._v(" "),t.showAdCloseaLink?i("a",{attrs:{target:"_blank",href:t.preview.bottomingAdInfo.url}},[t._v(t._s(t.preview.bottomingAdInfo.title))]):t._e()]):t._e(),t._v(" "),"1"===t.type||"4"===t.type?i("div",{staticClass:"picture-ad"},[i("a",{attrs:{target:"_blank","data-report-click":t.reportClick},on:{click:function(e){return t.jumpToPreview(t.preview.clickUrl)}}},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.preview.imgUrl,alt:""}})]),t._v(" "),void 0===t.preview.showAdStatus||t.preview.showAdStatus?i("div",{staticClass:"ad-icon"},[t._v(t._s(t._f("filterClient")(t.preview.client,t.clientObj)))]):t._e(),t._v(" "),void 0===t.preview.closeAdStatus||t.preview.closeAdStatus?i("div",{staticClass:"ad-icon close-ad",on:{click:function(e){return t.closeAd()}}},[t._v("关闭")]):t._e(),t._v(" "),i("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})]):t._e(),t._v(" "),"2"===t.type?i("div",{staticClass:"feed-template"},["1"===t.fType?i("div",{staticClass:"ad-box ad-imgtxt-box clearfix"},[i("a",{staticStyle:{display:"block",overflow:"hidden"},attrs:{href:t.preview.clickUrl,target:"_blank","data-report-click":t.reportClick}},[i("div",{staticClass:"img-box"},[i("img",{style:{width:t.imgWidth+"px",height:t.imgHeight+"px"},attrs:{src:t.preview.imgUrl,alt:""}})]),t._v(" "),i("div",{staticClass:"content-box",style:{marginLeft:t.contentMarginLeft+"px"}},[i("p",{staticClass:"tit"},[t._v(t._s(t.preview.title))]),t._v(" "),i("p",{staticClass:"intro"},[t._v(t._s(t.preview.abstract))])])]),t._v(" "),void 0===t.preview.showAdStatus||t.preview.showAdStatus?i("div",{staticClass:"ad-icon"},[t._v(t._s(t._f("filterClient")(t.preview.client,t.clientObj)))]):t._e(),t._v(" "),void 0===t.preview.closeAdStatus||t.preview.closeAdStatus?i("div",{staticClass:"ad-icon close-ad",on:{click:function(e){return t.closeAd()}}},[t._v("关闭")]):t._e(),t._v(" "),i("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})]):t._e(),t._v(" "),"2"===t.fType?i("div",{staticClass:"ad-box ad-txt-box"},[i("a",{attrs:{href:t.preview.clickUrl,target:"_blank","data-report-click":t.reportClick}},[i("p",{staticClass:"tit"},[t._v(t._s(t.preview.title))]),t._v(" "),i("p",{staticClass:"intro"},[t._v(t._s(t.preview.abstract))])]),t._v(" "),void 0===t.preview.showAdStatus||t.preview.showAdStatus?i("div",{staticClass:"ad-icon"},[t._v(t._s(t._f("filterClient")(t.preview.client,t.clientObj)))]):t._e(),t._v(" "),void 0===t.preview.closeAdStatus||t.preview.closeAdStatus?i("div",{staticClass:"ad-icon close-ad",on:{click:function(e){return t.closeAd()}}},[t._v("关闭")]):t._e(),t._v(" "),i("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})]):t._e(),t._v(" "),"3"===t.fType?i("div",{staticClass:"ad-box"},[i("div",{staticClass:"pic_container"},[i("div",{staticClass:"pic_title"},[t._v("\n          "+t._s(t.preview.title)+"\n        ")]),t._v(" "),i("a",{staticClass:"pic_row",attrs:{href:t.preview.clickUrl,target:"_blank","data-report-click":t.reportClick}},t._l(t.preview.imgUrl,function(t,e){return i("div",{key:e,staticClass:"pic_item"},[i("img",{attrs:{src:t}})])}),0),t._v(" "),void 0===t.preview.showAdStatus||t.preview.showAdStatus?i("div",{staticClass:"ad-icon"},[t._v(t._s(t._f("filterClient")(t.preview.client,t.clientObj)))]):t._e(),t._v(" "),void 0===t.preview.closeAdStatus||t.preview.closeAdStatus?i("div",{staticClass:"ad-icon close-ad",on:{click:function(e){return t.closeAd()}}},[t._v("关闭")]):t._e(),t._v(" "),i("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})])]):t._e(),t._v(" "),"4"===t.fType?i("div",{staticClass:"ad-box clearfix big_pic_container"},[i("a",{attrs:{href:t.preview.clickUrl,target:"_blank","data-report-click":t.reportClick}},[i("p",{staticClass:"pic_title"},[t._v(t._s(t.preview.title))]),t._v(" "),i("img",{attrs:{src:t.preview.imgUrl,alt:""}})]),t._v(" "),void 0===t.preview.showAdStatus||t.preview.showAdStatus?i("div",{staticClass:"ad-icon"},[t._v(t._s(t._f("filterClient")(t.preview.client,t.clientObj)))]):t._e(),t._v(" "),void 0===t.preview.closeAdStatus||t.preview.closeAdStatus?i("div",{staticClass:"ad-icon close-ad",on:{click:function(e){return t.closeAd()}}},[t._v("关闭")]):t._e(),t._v(" "),i("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})]):t._e()]):t._e(),t._v(" "),"3"===t.type?i("div",{staticClass:"ad-box"},[i("div",{staticClass:"pic_container"},[i("a",{staticClass:"pic_row",attrs:{href:t.preview.clickUrl,target:"_blank","data-report-click":t.reportClick}},t._l(t.preview.imgUrl,function(t,e){return i("div",{key:e,staticClass:"pic_item interactiveAd"},[i("img",{attrs:{src:t}})])}),0),t._v(" "),void 0===t.preview.showAdStatus||t.preview.showAdStatus?i("div",{staticClass:"ad-icon"},[t._v("广告")]):t._e(),t._v(" "),void 0===t.preview.closeAdStatus||t.preview.closeAdStatus?i("div",{staticClass:"ad-icon close-ad",on:{click:function(e){return t.closeAd()}}},[t._v("关闭")]):t._e(),t._v(" "),i("img",{staticClass:"popuMonitor",attrs:{src:t.preview.popuMonitor}})])]):t._e()])};v._withStripped=!0;var d={render:v,staticRenderFns:[]},u=d;var _=!1;var w=i("C7Lr")(l,u,!1,function(t){_||(i("grgC"),i("cVme"))},"data-v-36749b0d",null);w.options.__file="src/pages/preview/Preview.vue";e.default=w.exports}});
//# sourceMappingURL=0.e03e68dd4b004a6329bf.js.map