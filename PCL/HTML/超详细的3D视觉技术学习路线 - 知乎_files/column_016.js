(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1543:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));var n=a(24),c=a.n(n),o=a(1),i=a.n(o),s=a(7),l=a.n(s),r=a(600),d=a(235),u=a.n(d);function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.trimZero,n=void 0!==a&&a,c=String(e).padStart(2,"0").slice(-2);return n&&"00"===c?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(c)}var m={"淘宝":"taobao","天猫":"tmall","京东":"jingdong","京东自营":"jingdongSale","知乎":"zhihu","美团酒旅":"meituanhotel","苏宁":"suning","有赞":"youzan"},b=a(61),v=a(2),O=a.n(v),j=a(9),g=a(586),p=a(33),h=a.n(p),C=a(3);var N=function(e){var t=e.width,a=void 0===t?"10":t,n=e.height,c=void 0===n?"10":n;return Object(C.f)("svg",h()({width:a,height:c,viewBox:"0 0 10 10",fill:"none"},e),Object(C.f)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 0C7.76142 0 10 2.23858 10 5C10 7.76142 7.76142 10 5 10C2.23858 10 0 7.76142 0 5C0 2.23858 2.23858 0 5 0ZM5 1C2.79086 1 1 2.79086 1 5C1 7.20914 2.79086 9 5 9C7.20914 9 9 7.20914 9 5C9 2.79086 7.20914 1 5 1ZM5 2C5.27614 2 5.5 2.22386 5.5 2.5V4.21902C5.5 4.54533 5.65921 4.85112 5.92654 5.03825L7.37712 6.05365C7.60334 6.21201 7.65836 6.52378 7.5 6.75C7.34164 6.97622 7.02988 7.03124 6.80365 6.87288L4.92654 5.5589C4.65921 5.37178 4.5 5.06599 4.5 4.73967V2.5C4.5 2.22386 4.72386 2 5 2Z",fill:"white"}))},k=a(217),y="GoodsItemCardPromo",I=function(e){var t=e.countdown,a=Object(o.useState)(t),n=c()(a,2),s=n[0],l=n[1],r=Object(o.useRef)();Object(o.useEffect)((function(){return s<=0?(clearInterval(r.current),void l(0)):(r.current=setInterval((function(){l(s-1)}),1e3),function(){return clearInterval(r.current)})}),[s]);var d=Object(k.b)(s),u=d.d,f=d.h,m=d.m,b=d.s,v="".concat(u?u+"天":""," ").concat(f,":").concat(m,":").concat(b);return Object(C.f)("div",{className:y},Object(C.f)("div",{className:"".concat(y,"-left")},Object(C.f)(N,{className:"".concat(y,"-icon")}),Object(C.f)("span",null,"限时秒杀")),Object(C.f)("div",{className:"".concat(y,"-right")},s?Object(C.f)(i.a.Fragment,null,Object(C.f)("span",null,"距结束还剩 "),Object(C.f)("span",{className:"".concat(y,"-rightText")},v)):Object(C.f)("span",null,"活动已结束")))},w=a(724),S=a(19),G=function(e){var t=e.className,a=e.style,n=e.id,c=e.skuId,i=e.imgUrl,s=e.title,r=e.price,d=void 0===r?0:r,u=e.underlinePrice,v=void 0===u?0:u,O=e.source,p=e.sourceId,h=e.subtitle,N=e.tags,k=void 0===N?[]:N,y=e.promoInfo,G=void 0===y?{}:y,T=e.showBottomLine,F=void 0!==T&&T,L=e.zaData,_=void 0===L?{}:L,z=e.onClick,x=G.type,M=G.price,R=void 0===M?0:M,P=G.countdown,E=b.g.includes(x)&&P>0,U=h||O;b.e.ZhiGoods===p&&(U="知乎自营"),Object(o.useEffect)((function(){(null==_?void 0:_.showId)&&j.a.trackCardShow(null,{id:null==_?void 0:_.showId,path:[{module_name:"".concat(n,"_").concat(c,"_").concat(m[O])}]})}),[]);return Object(C.f)("div",{className:l()("GoodsItemCard",{"GoodsItemCard-promo":E},t),style:a,onClick:function(){(null==_?void 0:_.clickId)&&j.a.trackEvent(null,{id:null==_?void 0:_.clickId,action:"OpenUrl",path:[{module_name:"".concat(n,"_").concat(c,"_").concat(m[O])}]}),"function"==typeof z&&z()}},E&&Object(C.f)(I,{countdown:P}),Object(C.f)("div",{className:"GoodsItemCard-main"},Object(C.f)("div",{className:"GoodsItemCard-left"},Object(C.f)("div",{className:"GoodsItemCard-imgLayer"}),Object(C.f)("img",{className:"GoodsItemCard-imgUrl",src:i,alt:""})),Object(C.f)("div",{className:"GoodsItemCard-right"},Object(C.f)("div",{className:"GoodsItemCard-title"},s),!!k.length&&Object(C.f)(w.a,{className:"GoodsItemCard-tags",tags:Object(S.camelizeKeys)(k)}),Object(C.f)("div",{className:"GoodsItemCard-footer"},Object(C.f)("div",{className:"GoodsItemCard-priceBox"},Object(C.f)("span",{className:"GoodsItemCard-price"},"¥".concat(f(R||d))),R?Object(C.f)("span",{className:"GoodsItemCard-originalPrice"},"¥".concat(f(d))):v?Object(C.f)("span",{className:"GoodsItemCard-underlinePrice"},"¥".concat(f(v))):null),Object(C.f)("div",{className:"GoodsItemCard-source"},U,Object(C.f)(g.a,{size:20,center:!0})))),Object(C.f)("div",{className:"GoodsItemCard-bottomLine",style:{display:F?"block":"none"}})))};G.prototype={className:O.a.string,style:O.a.object,id:O.a.string,skuId:O.a.string,imgUrl:O.a.string.isRequired,title:O.a.string.isRequired,subtitle:O.a.string,price:O.a.number,source:O.a.string.isRequired,sourceId:O.a.number.isRequired,showBottomLine:O.a.bool,tags:O.a.array,zaData:O.a.object,promoInfo:O.a.object,onClick:O.a.func};var T=G,F=a(722),L=a(41),_=a.n(L),z=function(){return Object(C.f)(i.a.Fragment,null)},x={SkeletonH01:function(e){var t=e.lineClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t}))},SkeletonP01:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",{className:a}),Object(C.f)("div",null,Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t})))},SkeletonT01:function(e){var t=e.lineClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t}))},SkeletonT02:function(e){var t=e.lineClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t}))},SkeletonC01:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",{className:a}),Object(C.f)("div",null,Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t})))},SkeletonC02:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",null,Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t})),Object(C.f)("div",{className:a}))},SkeletonC03:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",{className:a}),Object(C.f)("div",{style:{width:"100%"}},Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t})))},SkeletonC04:function(e){var t=e.lineClass,a=e.blockClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",{className:"".concat(a,"-1")}),Object(C.f)("div",{className:a}),Object(C.f)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},Object(C.f)("div",{className:t}),Object(C.f)("div",{className:t})))},SkeletonI01:function(e){var t=e.blockClass;return Object(C.f)(i.a.Fragment,null,Object(C.f)("div",{className:t}))},SkeletonSpacing:z,SkeletonFill:z},M=i.a.memo((function(e){var t,a=e.variant,n=void 0===a?"H01":a,c=e.height,o=e.width,i=void 0===o?"auto":o,s=e.animation,r=void 0===s?"ease-in":s,d="skeleton__line--".concat(n.toLowerCase()),u="skeleton--".concat(n.toLowerCase()),f=l()(_()({skeleton__block:!0},"skeleton__block--".concat(n.toLowerCase()),!0)),m=l()(_()({skeleton__line:!0},d,!0)),b=l()((t={skeleton:!0},_()(t,u,!0),_()(t,"skeleton--ease-in","ease-in"===r),t)),v={width:i};c&&["Spacing","Fill"].includes(n)&&(v.height="number"==typeof c?"".concat(c,"px"):c);var O=x["Skeleton".concat(n)];return Object(C.f)("section",{className:b,style:v},Object(C.f)(O,{variant:n,lineClass:m,blockClass:f}))}));M.propTypes={variant:O.a.string,height:O.a.oneOfType([O.a.string,O.a.number]),width:O.a.oneOfType([O.a.string,O.a.number]),animation:O.a.oneOfType([O.a.bool,O.a.string])};var R=M;var P=i.a.memo((function(e){var t=e.content,a=function(e){return("string"==typeof e?e.split(","):e).map((function(e){var t=e.split("-"),a=c()(t,2),n=a[0],o=a[1];return["Spacing","Fill"].includes(n)?{type:n,height:+o}:{type:n,count:+o||1}}))}(void 0===t?"T01":t);return Object(C.f)(i.a.Fragment,null,a.map((function(e,t){var a=e.type,n=e.count,c=e.height;return n?Array.from({length:n}).map((function(e,n){return Object(C.f)(R,{variant:a,key:"".concat(t,"-").concat(n)})})):Object(C.f)(R,{variant:a,height:c,key:"".concat(t,"-").concat(c)})})))}));P.prototype={content:Object(v.oneOfType)([Object(v.arrayOf)(v.string),v.string])};var E=P,U=a(18),B={"京东":"jingdong","淘宝":"taobao","拼多多":"pinduoduo","苏宁":"suning","美团酒旅":"meituanhotel","知乎":"zhihu","有赞":"youzan"},Z=function(e){var t=e.className,a=e.style,n=e.showModal,s=void 0===n||n,d=e.withModal,f=void 0===d||d,m=e.modalTitle,v=void 0===m?"该商品的所有购买渠道":m,O=e.id,g=e.url,p=void 0===g?"":g,h=e.fetcherOptions,N=void 0===h?{}:h,k=e.scenes,y=void 0===k?0:k,I=e.fetcher,w=void 0===I?r.a:I,G=e.onClose,L=e.onSelectCard;Object(U.g)();var _=Object(o.useState)(0),z=c()(_,2),x=z[0],M=z[1],R=Object(o.useState)(!1),P=c()(R,2),Z=P[0],D=P[1],q=Object(o.useState)([]),K=c()(q,2),A=K[0],H=K[1],J=Object(o.useState)([]),V=c()(J,2),Q=V[0],W=V[1],X=Object(o.useState)(!1),Y=c()(X,2),$=Y[0],ee=Y[1];Object(o.useEffect)((function(){j.a.trackCardShow(null,{id:10331,path:[{module_name:O}]})}),[]),Object(o.useEffect)((function(){D(!0);var e=p||"/api/v4/mcn/linkcard/".concat(O,"?scenes=").concat(y);w(e,N).then((function(e){var t=Object(S.camelizeKeys)((null==e?void 0:e.data)||{}),a=t.children,n=void 0===a?[]:a,c=t.similarChildren,o=void 0===c?[]:c,i=[],s=[],l=[],r=[];u()(null==e?void 0:e.data)||n.length&&(n.forEach((function(e){var t=e.isSimilarChildren;e.sourceId!==b.e.ZhiGoods?t?r.push(Object.assign({},e,{children:null})):l.push(Object.assign({},e,{children:null})):t?s.push(Object.assign({},e,{children:null})):i.push(Object.assign({},e,{children:null}))})),i.push(Object.assign({},null==e?void 0:e.data,{children:null}))),H(i.concat(l).concat(s).concat(r)),W(o),ee(!1)})).catch((function(){ee(!0)})).finally((function(){setTimeout((function(){D(!1)}),500)}))}),[O,x]);var te=Object(C.f)("div",{className:"GoodsCardList-container"},Z?Object(C.f)(i.a.Fragment,null,Object(C.f)(E,{content:"C03,Spacing-26,C03",height:72})):$?Object(C.f)("div",{className:"GoodsCardList-error"},Object(C.f)("div",{className:"GoodsCardList-errorDesc"},"Oops~ 出错了"),Object(C.f)("div",{className:"GoodsCardList-errorBtn",onClick:function(){M(x+1)}},"刷新重试")):Object(C.f)(i.a.Fragment,null,[A,Q].map((function(e,t){return e.length?Object(C.f)(o.Fragment,{key:t},e.map((function(e,a){var n=Object(S.camelizeKeys)(e),c=n.id,i=n.skuid,s=n.title,l=n.url,r=n.imgUrl,d=n.price,u=n.underlinePrice,f=n.source,m=n.sourceId,b=n.subtitle,v=n.productType,O=n.tags,j=n.promoInfo,g=n.isSimilarChildren;return Object(C.f)(o.Fragment,{key:"".concat(i,"-").concat(t,"-").concat(a)},1===t&&Object(C.f)("div",{className:"GoodsCardList-similarText"},"相似商品"),Object(C.f)(U.b,{block:"goodsRecommend_polymericCardPopup_goodsCard",content:{type:"GoodsRecommend",id:"".concat(c,"-").concat(i,"-").concat(B[f])},extra:{link:{url:l}}},Object(C.f)(U.e,{shouldTrackClick:!0,className:"GoodsCardList-listItem",zaType:"Card",zaText:s,zaAction:"OpenUrl",zaEventType:"Click",extra:{link:{url:l},configMap:{goodsListType:g?"similar":"same"}}},Object(C.f)(T,{id:c,skuId:i,title:s,imgUrl:r,price:d,underlinePrice:u,source:f,sourceId:m,subtitle:b,productType:v,showBottomLine:!1,zaData:{showId:10371,clickId:10372},tags:O,promoInfo:j,onClick:function(){return t=e,void(L&&L(t));var t}}))))}))):null}))));return f?Object(C.f)(F.a,{className:l()("GoodsCardList",t),style:a,size:"large",title:v,onClose:G},s&&te):te};Z.prototype={className:O.a.string,style:O.a.object,showModal:O.a.bool,withModal:O.a.bool,modalTitle:O.a.string,id:O.a.string,url:O.a.string,fetcherOptions:O.a.object,scenes:O.a.number,fetcher:O.a.func,onClose:O.a.func,onSelectCard:O.a.func};var D=Z}}]);
//# sourceMappingURL=column.GoodsRecommendGoodsCardList.1b9dc6c6f4a994f673a2.js.map